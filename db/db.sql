CREATE DATABASE siph;
USE siph;

CREATE TABLE configuracion(idcon INT(2) PRIMARY KEY AUTO_INCREMENT, nitcon VARCHAR(255), titcon VARCHAR(100), imgcon VARCHAR(255), descon VARCHAR(255), piecon VARCHAR(255));
CREATE TABLE perfil(idper INT(5) PRIMARY KEY, nomper VARCHAR(50), pagini INT(5));
CREATE TABLE periodo(idprd BIGINT(7) PRIMARY KEY AUTO_INCREMENT, finiprd DATE, ffinprd DATE, actprd TINYINT(1));
CREATE TABLE pagina(idpag INT(5) PRIMARY KEY, nompag VARCHAR(255), rutpag VARCHAR(255), mospag TINYINT(1), ordpag TININT(1), icopag VARCHAR(255));
CREATE TABLE dominio(iddom INT(5) PRIMARY KEY AUTO_INCREMENT, nomdom VARCHAR(255));
CREATE TABLE vivienda(idviv INT(5) PRIMARY KEY AUTO_INCREMENT, idpsn BIGINT(20), tpoviv INT(5), nomviv VARCHAR(50), depviv INT(5));
CREATE TABLE notificacion(idnot BIGINT(20) PRIMARY KEY AUTO_INCREMENT, titnot VARCHAR(50), fhnot DATETIME, ffinnot DATETIME, desnot TEXT, idpsn BIGINT(20));
CREATE TABLE documentacion(iddoc BIGINT(10), nomdoc VARCHAR(200), idpsn BIGINT(20), fhdoc DATETIME, rutdoc VARCHAR(255), tpodoc INT(5));
CREATE TABLE valor(idval INT(5) PRIMARY KEY AUTO_INCREMENT, nomval VARCHAR(255), iddom INT(5), parval VARCHAR(255), actval TINYINT(1));
CREATE TABLE vario(idvar BIGINT(20) PRIMARY KEY AUTO_INCREMENT, idviv INT(5), nomvar VARCHAR(255), tpovar INT(5));
CREATE TABLE persona(idpsn BIGINT(20) PRIMARY KEY AUTO_INCREMENT, nompsn VARCHAR(50), apepsn VARCHAR(50), docpsn VARCHAR(20), tpdcpsn INT(5), telpsn VARCHAR(10), emapsn VARCHAR(255), passpsn VARCHAR(100), actpsn TINYINT(1), idper INT(5), genpsn INT(5), fhnapsn DATE);
CREATE TABLE ingegr(idineg BIGINT(20) PRIMARY KEY AUTO_INCREMENT, tpoineg INT(5), fhineg DATETIME, cctineg VARCHAR(255), desineg TEXT, valineg BIGINT(20), sopineg VARCHAR(255), idpsn BIGINT(20), idprd BIGINT(7));
CREATE TABLE concejo(idccj BIGINT(20) PRIMARY KEY AUTO_INCREMENT, idprd BIGINT(7), idpsn BIGINT(20), tpoccj INT(5));
CREATE TABLE ocupante(idpsn BIGINT(20), idviv INT(5), tpoocu INT(5));
CREATE TABLE pagper(idper INT(5), idpag INT(5));

ALTER TABLE vivienda ADD KEY vivpsn(idpsn), ADD KEY vvtpvv(tpoviv), ADD KEY vvdpvv(depviv), ADD CONSTRAINT vivpsn FOREIGN KEY (idpsn) REFERENCES persona(idpsn), ADD CONSTRAINT vvtpvv FOREIGN KEY (tpoviv) REFERENCES valor(idval);
ALTER TABLE notificacion ADD KEY notpsn(idpsn), ADD CONSTRAINT notpsn FOREIGN KEY (idpsn) REFERENCES persona(idpsn);
ALTER TABLE documentacion ADD KEY docpsn(idpsn), ADD KEY dvtpdc(tpodoc), ADD CONSTRAINT docpsn FOREIGN KEY (idpsn) REFERENCES persona(idpsn), ADD CONSTRAINT dvtpdc FOREIGN KEY (tpodoc) REFERENCES valor(idval);
ALTER TABLE valor ADD KEY valdom(iddom), ADD CONSTRAINT valdom FOREIGN KEY (iddom) REFERENCES dominio(iddom);
ALTER TABLE vario ADD KEY varviv(idviv), ADD KEY vavtpva(tpovar), ADD CONSTRAINT varviv FOREIGN KEY (idviv) REFERENCES vivienda(idviv), ADD CONSTRAINT vavtpva FOREIGN KEY (tpovar) REFERENCES valor(idval);
ALTER TABLE persona ADD KEY psnper(idper), ADD KEY pvtpdcps(tpdcpsn), ADD KEY pvgnps(genpsn), ADD CONSTRAINT psnper FOREIGN KEY (idper) REFERENCES perfil(idper), ADD CONSTRAINT pvtpdcps FOREIGN KEY (tpdcpsn) REFERENCES valor(idval), ADD CONSTRAINT pvgnps FOREIGN KEY (genpsn) REFERENCES valor(idval);
ALTER TABLE ingegr ADD KEY ievtpie(tpoineg), ADD KEY iepsn(idpsn), ADD KEY ieprd(idprd), ADD CONSTRAINT ievtpie FOREIGN KEY (tpoineg) REFERENCES valor(idval), ADD CONSTRAINT iepsn FOREIGN KEY (idpsn) REFERENCES persona(idpsn), ADD CONSTRAINT ieprd FOREIGN KEY (idprd) REFERENCES periodo(idprd);
ALTER TABLE concejo ADD KEY ccjprd(idprd), ADD KEY ccjpsn(idpsn), ADD KEY cvtpcc(tpoccj), ADD CONSTRAINT ccjpsn FOREIGN KEY (idpsn) REFERENCES persona(idpsn), ADD CONSTRAINT ccjprd FOREIGN KEY (idprd) REFERENCES periodo(idprd), ADD CONSTRAINT cvtpcc FOREIGN KEY (tpoccj) REFERENCES valor(idval);
ALTER TABLE ocupante ADD KEY ocupsn(idpsn), ADD KEY ocuviv(idviv), ADD KEY ovtpoc(tpoocu), ADD CONSTRAINT ocupsn FOREIGN KEY (idpsn) REFERENCES persona(idpsn), ADD CONSTRAINT ocuviv FOREIGN KEY (idviv) REFERENCES vivienda(idviv), ADD CONSTRAINT ovtpoc FOREIGN KEY (tpoocu) REFERENCES valor(idval);
ALTER TABLE pagper ADD KEY pppag(idpag), ADD KEY ppper(idper), ADD CONSTRAINT pppag FOREIGN KEY (idpag) REFERENCES pagina(idpag), ADD CONSTRAINT ppper FOREIGN KEY (idper) REFERENCES perfil(idper);

ALTER TABLE `concejo` CHANGE `idccj` `idccj` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de consejo', CHANGE `idprd` `idprd` BIGINT(7) NULL DEFAULT NULL COMMENT 'Codigo de periodo', CHANGE `idpsn` `idpsn` BIGINT(20) NULL DEFAULT NULL COMMENT 'Codigo de persona', CHANGE `tpoccj` `tpoccj` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de concejo';
ALTER TABLE `configuracion` CHANGE `idcon` `idcon` INT(2) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de configuracion', CHANGE `nitcon` `nitcon` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nit de configuracion', CHANGE `titcon` `titcon` VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Titulo de configuracion', CHANGE `imgcon` `imgcon` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Ruta de imagen de configuracion', CHANGE `descon` `descon` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Descripcion de configuracion', CHANGE `piecon` `piecon` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Pie de pagina configuracion';
ALTER TABLE `documentacion` CHANGE `iddoc` `iddoc` BIGINT(10) NULL DEFAULT NULL COMMENT 'Codigo de documentacion', CHANGE `nomdoc` `nomdoc` VARCHAR(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de documentacion', CHANGE `idpsn` `idpsn` BIGINT(20) NULL DEFAULT NULL COMMENT 'Codigo de persona', CHANGE `fhdoc` `fhdoc` DATETIME NULL DEFAULT NULL COMMENT 'Fecha y hora de documentacion', CHANGE `rutdoc` `rutdoc` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Ruta de la documentacion', CHANGE `tpodoc` `tpodoc` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de documentacion';
ALTER TABLE `dominio` CHANGE `iddom` `iddom` INT(5) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de dominio', CHANGE `nomdom` `nomdom` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de dominio';
ALTER TABLE `ingegr` CHANGE `idineg` `idineg` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de ingreso o egreso', CHANGE `tpoineg` `tpoineg` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de ingreso o egreso', CHANGE `fhineg` `fhineg` DATETIME NULL DEFAULT NULL COMMENT 'Fecha y hora de ingreso o egreso', CHANGE `cctineg` `cctineg` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Concepto de ingreso o egreso', CHANGE `desineg` `desineg` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Descripcion de ingreso o egreso', CHANGE `valineg` `valineg` BIGINT(20) NULL DEFAULT NULL COMMENT 'Valor de ingreso o egreso', CHANGE `sopineg` `sopineg` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Soporte de ingreso o egreso', CHANGE `idpsn` `idpsn` BIGINT(20) NULL DEFAULT NULL COMMENT 'Codigo de persona', CHANGE `idprd` `idprd` BIGINT(7) NULL DEFAULT NULL COMMENT 'Codigo de periodo';
ALTER TABLE `notificacion` CHANGE `idnot` `idnot` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de notificacion', CHANGE `titnot` `titnot` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Titulo de notificacion', CHANGE `fhnot` `fhnot` DATETIME NULL DEFAULT NULL COMMENT 'Fecha y hora de notificacion', CHANGE `ffinnot` `ffinnot` DATETIME NULL DEFAULT NULL COMMENT 'Fecha find de notificacion', CHANGE `desnot` `desnot` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Descripcion de notificacion', CHANGE `idpsn` `idpsn` BIGINT(20) NULL DEFAULT NULL COMMENT 'Codigo de persona';
ALTER TABLE `ocupante` CHANGE `idpsn` `idpsn` BIGINT(20) NULL DEFAULT NULL COMMENT 'Codigo de persona', CHANGE `idviv` `idviv` INT(5) NULL DEFAULT NULL COMMENT 'Codigo de vivienda', CHANGE `tpoocu` `tpoocu` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de ocupante';
ALTER TABLE `pagina` CHANGE `idpag` `idpag` INT(5) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de pagina', CHANGE `nompag` `nompag` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de pagina', CHANGE `rutpag` `rutpag` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Ruta de pagina', CHANGE `mospag` `mospag` TINYINT(1) NULL DEFAULT NULL COMMENT 'Mostrar pagina', CHANGE `ordpag` `ordpag` INT(5) NULL DEFAULT NULL COMMENT 'Orden de pagina', CHANGE `icopag` `icopag` VARCHAR(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Icono de pagina';
ALTER TABLE `pagper` CHANGE `idper` `idper` INT(5) NULL DEFAULT NULL COMMENT 'Codigo de perfil', CHANGE `idpag` `idpag` INT(5) NULL DEFAULT NULL COMMENT 'Codigo de pagina';
ALTER TABLE `perfil` CHANGE `idper` `idper` INT(5) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de perfil', CHANGE `nomper` `nomper` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de perfil', CHANGE `pagini` `pagini` INT(5) NULL DEFAULT NULL COMMENT 'Pagina de inicio';
ALTER TABLE `periodo` CHANGE `idprd` `idprd` BIGINT(7) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de periodo', CHANGE `finiprd` `finiprd` DATE NULL DEFAULT NULL COMMENT 'Fecha inicio de periodo', CHANGE `ffinprd` `ffinprd` DATE NULL DEFAULT NULL COMMENT 'Fecha fin de periodo', CHANGE `actprd` `actprd` TINYINT(1) NULL DEFAULT NULL COMMENT 'Perido activo';
ALTER TABLE `persona` CHANGE `idpsn` `idpsn` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de persona', CHANGE `nompsn` `nompsn` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombres de persona', CHANGE `apepsn` `apepsn` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Apellidos de persona', CHANGE `docpsn` `docpsn` VARCHAR(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Numero de documento de persona', CHANGE `tpdcpsn` `tpdcpsn` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de documento de persona', CHANGE `telpsn` `telpsn` VARCHAR(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Telefono de persona', CHANGE `emapsn` `emapsn` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Email de persona', CHANGE `passpsn` `passpsn` VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Contraseña de persona', CHANGE `actpsn` `actpsn` TINYINT(1) NULL DEFAULT NULL COMMENT 'Persona activa', CHANGE `idper` `idper` INT(5) NULL DEFAULT NULL COMMENT 'Codigo de persona', CHANGE `genpsn` `genpsn` INT(5) NULL DEFAULT NULL COMMENT 'Genero de persona', CHANGE `fhnapsn` `fhnapsn` DATE NULL DEFAULT NULL COMMENT 'Fecha de nacimiento persona';
ALTER TABLE `valor` CHANGE `idval` `idval` INT(5) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de valor', CHANGE `nomval` `nomval` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de valor', CHANGE `iddom` `iddom` INT(5) NULL DEFAULT NULL COMMENT 'Codigo de dominio', CHANGE `parval` `parval` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Parametro de valor', CHANGE `actval` `actval` TINYINT(1) NULL DEFAULT NULL COMMENT 'Valor activo';
ALTER TABLE `vario` CHANGE `idvar` `idvar` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de vario', CHANGE `idviv` `idviv` INT(5) NULL DEFAULT NULL COMMENT 'codigo de vivienda', CHANGE `nomvar` `nomvar` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de vario', CHANGE `tpovar` `tpovar` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de vario';
ALTER TABLE `vivienda` CHANGE `idviv` `idviv` INT(5) NOT NULL AUTO_INCREMENT COMMENT 'Codigo de vivienda', CHANGE `idpsn` `idpsn` BIGINT(20) NULL DEFAULT NULL COMMENT 'Codigo de persona', CHANGE `tpoviv` `tpoviv` INT(5) NULL DEFAULT NULL COMMENT 'Tipo de vivienda', CHANGE `nomviv` `nomviv` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT 'Nombre de vivienda', CHANGE `depviv` `depviv` INT(5) NULL DEFAULT NULL COMMENT 'Depende de vivienda';